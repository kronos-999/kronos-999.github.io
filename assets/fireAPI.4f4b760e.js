import{a as n}from"./app.eacb9c81.js";import{m as e}from"./vendor.78461187.js";let o=null;const a=async(a,t={},l=!0)=>{var i,s;try{0,n.loading=!0;const r=e(),c=await fetch("https://api.passion-select.com"+a,{method:"POST",credentials:"include",body:JSON.stringify(t),headers:{"Content-Type":"application/json","X-PS-TICKET":n.ticket}});if([401,403].includes(c.status))return o={message:"Log in again",code:403},[null,o];if(!c.ok)return o={message:"Something went wrong",code:500},[null,o];const u=e(c);return 1==l&&(r.value=await u.value.json()),[r,null,u]}catch(r){return o=r,console.error(o),[null,r]}finally{if(o){if(403==o.code)return o=null,n.loading=!1,void(document.location=(null==(s=null==(i=n)?void 0:i.admin)?void 0:s.username)?"/admins/login":"/auth");alert("[ERROR]")}o=null,n.loading=!1}};export{a as f};
