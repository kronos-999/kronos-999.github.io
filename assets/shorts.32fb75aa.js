var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;import{o as i,k as n,a as l,F as o,l as c,t as d,q as p,d as u,p as f,a0 as m,e as h,aQ as x,aN as g,aR as v,aS as w,h as y,m as b,f as _}from"./vendor.78461187.js";import{a as D,e as j,c as k,d as O}from"./app.834e91fc.js";import{f as S}from"./fireAPI.03abe0f8.js";import{_ as z}from"./Badge.64e2efb0.js";import{_ as I}from"./ShortsFilters.3976739e.js";import"./LoadingSpinner.c14070a6.js";const R={role:"list",class:"mt-3 grid grid-cols-1 gap-5 xl:grid-cols-2 sm:gap-6"},F=l("img",{src:j,class:"hidden md:flex object-center w-1/3 rounded-l-md"},null,-1),P={class:"flex flex-1 items-start justify-between truncate rounded-r-md border-t border-r border-b border-gray-200 bg-white"},C={class:"flex flex-col w-full h-full truncate px-4 py-2 text-sm"},M={key:0,class:"whitespace-pre-wrap text-lg text-gray-900 hover:text-gray-600"},E={class:"flex items-center whitespace-pre-wrap text-md text-gray-900 hover:text-gray-600"},V={class:"flex items-center whitespace-pre-wrap text-md text-gray-900 hover:text-gray-600"},Y={key:1,class:"flex items-center whitespace-pre-wrap text-md text-gray-900 hover:text-gray-600"},q={key:2,class:"flex items-center whitespace-pre-wrap text-md text-gray-900 hover:text-gray-600"},A={class:"flex items-center text-md text-gray-900 hover:text-gray-600 mt-4"},B={key:0,class:"contents"},J={key:1,class:"contents"},L=h(" Verfügbarkeit unklar "),N={class:"flex flex-col h-full w-1/2 px-4 py-2 text-sm justify-between items-between"},Q=["onClick"],G={__name:"ClinicsShortsResults",props:["filters"],setup(e){const y=e;D.found_shorts=[],Date.prototype.toISODate=function(){return this.getFullYear()+"-"+("0"+(this.getMonth()+1)).slice(-2)+"-"+("0"+this.getDate()).slice(-2)};const b=e=>{const t=function(e,t){for(var a=[],s=new Date(e);s<=new Date(t);s.setDate(s.getDate()+1))a.push(new Date(s));return a}(y.filters.needed_from,y.filters.needed_until).map((e=>e.toISODate()));for(let a=0;a<e.length;a++){const s=new Date(e[a]).toISODate();if(t.includes(s))return!0}},_=async({id:e})=>{await S("/api/v2/medching/clinics/docs/medch",((e,i)=>{for(var n in i||(i={}))a.call(i,n)&&r(e,n,i[n]);if(t)for(var n of t(i))s.call(i,n)&&r(e,n,i[n]);return e})({doc:e,clinic_name:D.clinic.data.name},y.filters),!1),D.hitted_docs.push(e)};return(e,t)=>{const a=z;return i(),n("div",null,[l("section",R,[(i(!0),n(o,null,c(p(D).found_shorts.filter((e=>!p(D).hitted_docs.includes(e.id))).reduce(((e,t)=>b(t.shorts_availabilities)?[t,...e]:[...e,t]),[]),((e,t)=>{var s;return i(),n("div",{key:t,class:"transition-all col-span-1 flex rounded-md border-appromed hover:ring-2 hover:ring-appromed"},[F,l("div",P,[l("div",C,[e.position_id?(i(),n("h2",M,d(null==(s=p(D).positions.find((t=>t.id==e.position_id)))?void 0:s.name),1)):u("",!0),(i(!0),n(o,null,c(e.areas,(e=>{var t;return i(),n("h2",E,[f(p(m),{class:"h-4 w-4 text-appromed"}),h(" "+d(null==(t=p(D).areas.find((t=>t.id==e)))?void 0:t.name),1)])})),256)),(i(!0),n(o,null,c(e.specializations,(e=>{var t;return i(),n("h2",V,[f(p(x),{class:"h-4 w-4 text-appromed"}),h(" "+d(null==(t=p(D).specializations.find((t=>t.id==e)))?void 0:t.name),1)])})),256)),e.address?(i(),n("h2",Y,[f(p(g),{class:"h-4 w-4 text-appromed"}),h(" "+d(e.address),1)])):u("",!0),e.experience?(i(),n("h2",q,[f(p(v),{class:"h-4 w-4 text-appromed"}),h(" "+d(e.experience)+"+ Jahre ",1)])):u("",!0),l("div",A,[e.shorts_availabilities.length?(i(),n("span",B)):(i(),n("span",J,[f(p(w),{class:"h-4 w-4 text-appromed"}),L]))])]),l("div",N,[f(a,{label:"ID "+e.id},null,8,["label"]),l("button",{type:"button",class:"flex justify-center items-center rounded bg-appromed px-2 py-0.5 text-xs text-white",onClick:t=>_({id:e.id})},d(1==b(e.shorts_availabilities)?"Medch!":"Verfügbarkeit anfragen"),9,Q)])])])})),128))])])}}},H={class:"contents"},K=l("section",null,[l("img",{src:O,class:"w-96 h-auto mx-auto mb-6"})],-1),T={class:"mt-6"},U={__name:"shorts",setup(e){y(),b("");const t=b(!1);Date.prototype.toISODate=function(){return this.getFullYear()+"-"+("0"+(this.getMonth()+1)).slice(-2)+"-"+("0"+this.getDate()).slice(-2)};const a=function(e,t){for(var a=[],s=new Date(e);s<=new Date(t);s.setDate(s.getDate()+1))a.push(new Date(s));return a},s=_({position:null,area:null,specialization:null,needed_from:null,needed_until:null,experience:null});return(e,r)=>{const o=I,c=G;return i(),n("div",H,[K,l("section",T,[f(o,{onSearch:r[0]||(r[0]=({position:e,area:r,specialization:i,needed_from:n,needed_until:l,experience:o})=>(async({position:e,area:r,specialization:i,needed_from:n,needed_until:l,experience:o})=>{s.position=e,s.area=r,s.specialization=i,s.needed_from=n,s.needed_until=l,s.experience=o,t.value=!0,D.found_shorts=[];const[c,d]=await S("/api/v2/medching/clinics/shorts/search",{position:e,area:r,specialization:i,timespan:a(n,l).map((e=>e.toISODate())),experience:o});if(d)return t.value=!1,console.log(d),403==d.code?window.location.href="/auth":alert("ERROR");t.value=!1,c.value.length&&(D.found_shorts=c.value)})({position:e,area:r,specialization:i,needed_from:n,needed_until:l,experience:o})),disabled:1==t.value},null,8,["disabled"]),f(c,{filters:s},null,8,["filters"])])])}}};"function"==typeof k&&k(U);export{U as default};
