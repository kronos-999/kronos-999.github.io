import{a as n}from"./app.834e91fc.js";import{m as e}from"./vendor.78461187.js";let o=null;const t=async(t,a={},l=!0)=>{var i,s;try{0,n.loading=!0;const r=e(),u=await fetch("https://api.passion-select.com"+t,{method:"POST",credentials:"include",body:JSON.stringify(a),headers:{"Content-Type":"application/json","X-PS-TICKET":n.ticket}});if([401,403].includes(u.status))return o={message:"Log in again",code:403},[null,o];if(!u.ok)return o={message:"Something went wrong",code:500},[null,o];const c=e(u);return 1==l&&(r.value=await c.value.json()),[r,null,c]}catch(r){return o=r,console.error(o),[null,r]}finally{if(o){if(403==o.code)return o=null,n.loading=!1,void(document.location=(null==(s=null==(i=n)?void 0:i.admin)?void 0:s.username)?"/admins/login":"/auth");alert("[ERROR]")}o=null,n.loading=!1}};export{t as f};
