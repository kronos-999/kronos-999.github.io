var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;import{o as i,k as n,a as l,F as o,l as c,t as d,q as p,d as u,p as f,a0 as h,e as m,aQ as x,aN as g,aR as w,Z as v,aS as y,h as b,m as _,f as D}from"./vendor.78461187.js";import{a as j,e as O,c as k,d as S}from"./app.6e8926da.js";import{f as I}from"./fireAPI.d6c112e0.js";import{_ as z}from"./Badge.64e2efb0.js";import{_ as R}from"./ShortsFilters.a1775912.js";import"./LoadingSpinner.f2e737a5.js";const F={role:"list",class:"mt-3 grid grid-cols-1 gap-5 xl:grid-cols-2 sm:gap-6"},P=l("img",{src:O,class:"hidden md:flex object-center w-1/3 rounded-l-md"},null,-1),C={class:"flex flex-1 items-start justify-between truncate rounded-r-md border-t border-r border-b border-gray-200 bg-white"},M={class:"flex flex-col w-full h-full truncate px-4 py-2 text-sm"},E={key:0,class:"whitespace-pre-wrap text-lg text-gray-900 hover:text-gray-600"},V={class:"flex items-center whitespace-pre-wrap text-md text-gray-900 hover:text-gray-600"},Y={class:"flex items-center whitespace-pre-wrap text-md text-gray-900 hover:text-gray-600"},q={key:1,class:"flex items-center whitespace-pre-wrap text-md text-gray-900 hover:text-gray-600"},A={key:2,class:"flex items-center whitespace-pre-wrap text-md text-gray-900 hover:text-gray-600"},B={class:"flex items-center whitespace-pre-wrap text-md text-gray-900 hover:text-gray-600"},J={key:0,class:"contents"},L={key:1,class:"contents"},N=m(" Verfügbarkeit unklar "),Q={class:"flex flex-col h-full w-1/2 px-4 py-2 text-sm justify-between items-between"},Z=["onClick"],G={__name:"ClinicsShortsResults",props:["filters"],setup(e){const b=e;j.found_shorts=[],Date.prototype.toISODate=function(){return this.getFullYear()+"-"+("0"+(this.getMonth()+1)).slice(-2)+"-"+("0"+this.getDate()).slice(-2)};const _=e=>{const t=function(e,t){for(var a=[],s=new Date(e);s<=new Date(t);s.setDate(s.getDate()+1))a.push(new Date(s));return a}(b.filters.needed_from,b.filters.needed_until).map((e=>e.toISODate()));for(let a=0;a<e.length;a++){const s=new Date(e[a]).toISODate();if(t.includes(s))return!0}},D=async({id:e})=>{await I("/api/v2/medching/clinics/docs/medch",((e,i)=>{for(var n in i||(i={}))a.call(i,n)&&r(e,n,i[n]);if(t)for(var n of t(i))s.call(i,n)&&r(e,n,i[n]);return e})({doc:e,clinic_name:j.clinic.data.name},b.filters),!1),j.hitted_docs.push(e)};return(t,a)=>{const s=z;return i(),n("div",null,[l("section",F,[(i(!0),n(o,null,c(p(j).found_shorts.filter((e=>!p(j).hitted_docs.includes(e.id))).reduce(((e,t)=>_(t.shorts_availabilities)?[t,...e]:[...e,t]),[]),((t,a)=>{var r;return i(),n("div",{key:a,class:"transition-all col-span-1 flex rounded-md border-appromed hover:ring-2 hover:ring-appromed"},[P,l("div",C,[l("div",M,[t.position_id?(i(),n("h2",E,d(null==(r=p(j).positions.find((e=>e.id==t.position_id)))?void 0:r.name),1)):u("",!0),(i(!0),n(o,null,c(t.areas,(e=>{var t;return i(),n("h2",V,[f(p(h),{class:"h-4 w-4 text-appromed"}),m(" "+d(null==(t=p(j).areas.find((t=>t.id==e)))?void 0:t.name),1)])})),256)),(i(!0),n(o,null,c(t.specializations,(e=>{var t;return i(),n("h2",Y,[f(p(x),{class:"h-4 w-4 text-appromed"}),m(" "+d(null==(t=p(j).specializations.find((t=>t.id==e)))?void 0:t.name),1)])})),256)),t.address?(i(),n("h2",q,[f(p(g),{class:"h-4 w-4 text-appromed"}),m(" "+d(t.address),1)])):u("",!0),t.experience?(i(),n("h2",A,[f(p(w),{class:"h-4 w-4 text-appromed"}),m(" "+d(t.experience)+"+ Jahre ",1)])):u("",!0),l("h2",B,[t.shorts_availabilities.length?(i(),n("span",J,[f(p(v),{class:"h-4 w-4 text-appromed"}),m(" "+d(t.shorts_availabilities.map((e=>new Date(e).toISODate())).filter((t=>t>=e.filters.needed_from&&t<=e.filters.needed_until)).join(", ")),1)])):(i(),n("span",L,[f(p(y),{class:"h-4 w-4 text-appromed"}),N]))])]),l("div",Q,[f(s,{label:"ID "+t.id},null,8,["label"]),l("button",{type:"button",class:"flex justify-center items-center rounded bg-appromed px-2 py-0.5 text-xs text-white",onClick:e=>D({id:t.id})},d(1==_(t.shorts_availabilities)?"Medch!":"Verfügbarkeit anfragen"),9,Z)])])])})),128))])])}}},H={class:"contents"},K=l("section",null,[l("img",{src:S,class:"w-96 h-auto mx-auto mb-6"})],-1),T={class:"mt-6"},U={__name:"shorts",setup(e){b(),_("");const t=_(!1);Date.prototype.toISODate=function(){return this.getFullYear()+"-"+("0"+(this.getMonth()+1)).slice(-2)+"-"+("0"+this.getDate()).slice(-2)};const a=function(e,t){for(var a=[],s=new Date(e);s<=new Date(t);s.setDate(s.getDate()+1))a.push(new Date(s));return a},s=D({position:null,area:null,specialization:null,needed_from:null,needed_until:null,experience:null});return(e,r)=>{const o=R,c=G;return i(),n("div",H,[K,l("section",T,[f(o,{onSearch:r[0]||(r[0]=({position:e,area:r,specialization:i,needed_from:n,needed_until:l,experience:o})=>(async({position:e,area:r,specialization:i,needed_from:n,needed_until:l,experience:o})=>{s.position=e,s.area=r,s.specialization=i,s.needed_from=n,s.needed_until=l,s.experience=o,t.value=!0,j.found_shorts=[];const[c,d]=await I("/api/v2/medching/clinics/shorts/search",{position:e,area:r,specialization:i,timespan:a(n,l).map((e=>e.toISODate())),experience:o});if(d)return t.value=!1,console.log(d),403==d.code?window.location.href="/auth":alert("ERROR");t.value=!1,c.value.length&&(j.found_shorts=c.value)})({position:e,area:r,specialization:i,needed_from:n,needed_until:l,experience:o})),disabled:1==t.value},null,8,["disabled"]),f(c,{filters:s},null,8,["filters"])])])}}};"function"==typeof k&&k(U);export{U as default};
